<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <!-- Bootstrap Script - Î Î¡Î™Î Î±Ï€ÏŒ ÎŸÎ ÎŸÎ™ÎŸÎ”Î—Î ÎŸÎ¤Î• Î¬Î»Î»Î¿ script -->
  <script>
      window.APP_ENV = /Electron/i.test(navigator.userAgent) ? 'desktop' : 'web';
      window.ASSETS_BASE = './';
      window.API_BASE = localStorage.getItem('apiBase')
        || (APP_ENV === 'desktop' ? 'http://127.0.0.1:5059' : 'http://localhost:5059');
      window.assetUrl = p => (ASSETS_BASE.replace(/\/$/, '') + '/' + String(p||'').replace(/^\//,''));
  </script>
  
  <!-- Asset Configuration with Default Values -->
  <script src="asset-config.js"></script>
  
  <!-- Global Debug Script - Î Î¡Î©Î¤ÎŸ Î±Ï€ÏŒ ÏŒÎ»Î± Î³Î¹Î± Î½Î± ÎµÎ½Ï„Î¿Ï€Î¯ÏƒÎ¿Ï…Î¼Îµ undefined URLs -->
  <script>
      // 1) Î¤ÏÏ€Ï‰ÏƒÎµ ÎºÎ¬Î¸Îµ Î±Ï€Î¿Ï„Ï…Ï‡Î·Î¼Î­Î½Î¿ Ï†ÏŒÏÏ„Ï‰Î¼Î± asset Î¼Îµ element & stack
      window.addEventListener('error', (e) => {
          const t = e.target;
          if (!t) return;
          const url = t.src || t.href;
          if (url && /undefined(\?|$)/.test(url)) {
              console.error('[ASSET ERROR]', t.tagName, url, t);
              console.trace();
          }
      }, true);
      
      // 2) Î¤ÏÎ»Î¹Î¾Îµ Ï„Ï…Ï‡ÏŒÎ½ helper assetUrl Î³Î¹Î± Î½Î± ÎºÎ±Ï„Î±Î»Î¬Î²ÎµÎ¹Ï‚ Ï€ÏŒÏ„Îµ ÎºÎ±Î»ÎµÎ¯Ï„Î±Î¹ Î¼Îµ undefined
      const __assetUrl = window.assetUrl || (p => p || '');
      window.assetUrl = function(p) {
          if (!p) {
              console.error('[assetUrl] called with', p, new Error().stack);
              return ''; // Î¼Î·Î½ ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹Ï‚ 'undefined' â€” Î³ÏÏÎ½Î± ÎºÎµÎ½ÏŒ Î® default
          }
          return __assetUrl(p);
      };
      
      // 3) Î ÏÎ¿Î»Î·Ï€Ï„Î¹ÎºÎ¬ guards Î³Î¹Î± Î´Ï…Î½Î±Î¼Î¹ÎºÎ¬ loaders
      window.loadCss = function(href) {
          if (!href || /undefined(\?|$)/.test(href)) {
              console.warn('[loadCss] skip bad href:', href);
              return null;
          }
          const l = document.createElement('link');
          l.rel = 'stylesheet';
          l.href = href;
          document.head.appendChild(l);
          return l;
      };
      
      window.loadScript = function(src, attrs={}) {
          if (!src || /undefined(\?|$)/.test(src)) {
              console.warn('[loadScript] skip bad src:', src);
              return null;
          }
          const s = document.createElement('script');
          s.src = src;
          Object.assign(s, attrs);
          document.head.appendChild(s);
          return s;
      };
  </script>
  
  <title>Î¤Î¿Ï€Î¹ÎºÎ® Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ· AI</title>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><text y="48" font-size="48">ğŸ¦·</text></svg>'>
  
  <!-- Î‘Î½ Î¸ÎµÏ‚ offline, ÎºÎ±Ï„Î­Î²Î±ÏƒÎµ Ï„Î¿ tf.min.js Ï„Î¿Ï€Î¹ÎºÎ¬ ÎºÎ±Î¹ Î¬Î»Î»Î±Î¾Îµ Ï„Î¿ src -->
  <script src="./assets/js/tf.min.js" onerror="this.src='https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.21.0/dist/tf.min.js'"></script>
  <style>
    body{font-family:Inter,Arial,sans-serif;background:#0f172a;color:#e2e8f0;margin:0}
    .wrap{max-width:1100px;margin:24px auto;padding:16px}
    .card{background:#111827;border:1px solid #1f2937;border-radius:16px;padding:18px;margin-bottom:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{margin:0 0 8px}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .btn{border:0;border-radius:10px;padding:10px 14px;cursor:pointer;color:#fff}
    .btn-primary{background:#6366f1}
    .btn-accent{background:#8b5cf6}
    .btn-danger{background:#ef4444}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .mono{font-family:ui-monospace,Consolas,monospace;background:#0b1220;padding:8px;border-radius:8px}
    progress{width:100%}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ğŸ§  Î¤Î¿Ï€Î¹ÎºÎ® Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ· ÎœÎ¿Î½Ï„Î­Î»Î¿Ï…</h1>
      <div id="dsInfo" class="mono">Dataset: â€”</div>
      <div class="row" style="margin-top:8px">
        <button class="btn btn-primary" onclick="AI.scan()">Î£Î¬ÏÏ‰ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½</button>
        <button class="btn btn-accent" onclick="AI.train()">Î•ÎºÏ€Î±Î¯Î´ÎµÏ…ÏƒÎ·</button>
        <button class="btn btn-primary" onclick="AI.test()">Î“ÏÎ®Î³Î¿ÏÎ· Î”Î¿ÎºÎ¹Î¼Î®</button>
        <button class="btn btn-danger" onclick="AI.clearModel()">Î”Î¹Î±Î³ÏÎ±Ï†Î® Î¤Î¿Ï€Î¹ÎºÎ¿Ï ÎœÎ¿Î½Ï„Î­Î»Î¿Ï…</button>
        <button class="btn btn-primary" onclick="AI.exportDataset()">Î•Î¾Î±Î³Ï‰Î³Î® Dataset (JSON)</button>
      </div>
    </div>

    <div class="card">
      <h3>Î ÏÏŒÎ¿Î´Î¿Ï‚</h3>
      <progress id="prog" max="1" value="0"></progress>
      <div id="log" class="mono" style="margin-top:8px;height:160px;overflow:auto;white-space:pre-wrap"></div>
    </div>

    <div class="card grid">
      <div>
        <h3>Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿ Î”ÎµÎ¯Î³Î¼Î±</h3>
        <img id="preview" style="max-width:100%;border-radius:12px;border:1px solid #334155"/>
      </div>
      <div>
        <h3>Î ÏÏŒÎ²Î»ÎµÏˆÎ·</h3>
        <div id="pred" class="mono">â€”</div>
      </div>
    </div>
  </div>

  <script src="ai-training.js"></script>
</body>
</html>